<!DOCTYPE html>
<html lang="de">
  <head>
    <meta charset="UTF-8">
    {{/* Existence checks */}}
    {{ if $.Description }}<meta name="description" content="{{$.Description}} ">{{ end }}
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="./index.css">
    {{/*  Declaring a default title  */}}
    {{$title := default site.Title .Title}}
    {{/*  Overriding the context variable. 
    The . represents the value of the variable passed to with */}}
    {{ with $title }}<title>{{.}}</title>{{end}}
  </head>

  <body class="home"> 
    <header>
      <a href="{{ site.BaseURL | absLangURL }}">
        <img src="./image/logo_taskit.svg" alt="Taskit logo" 
             height="36" width="48" /> 
        GmbH
      </a>
      {{with site.Menus.main }}
        <nav>
          <button class="hamburger">&#9776;</button>
          <ul>
            {{range . }}
              <li>
                <a href="{{.URL }}">{{.Name }}</a> {{/*  | humanize */}}
              </li>
            {{ end }}
          </ul>
        </nav>
      {{ end }}
    </header>
              {{/* icon kreis pfeil runter*/}} 
    <section id="intro">  
                          {{/* Existence checks */}}
      {{with $title }}<h1>{{ . }}</h1>{{end}}
                          {{/*  definiert in /content/_index.md  
                          adding the humanize function "humanize" and 
                          adding the markdownify function ( parse Markdown from front matter data)
                          using the pipe operator*/}} 
      {{with .Param "subtitle"}}<h2>{{. | markdownify}}</h2>{{end}}  {{/*  | humanize */}} 
      <a href="{{ref . (.Param "explore")}}">Jetzt erkunden</a>
      {{/* "alter link" <a href="./produkte">Jetzt erkunden</a>  */}}
    </section>

    {{/* Looping durch products.csv*/}}
    {{with resources.GetMatch "products.csv"}}
    <section id="products">
      <h1>Unsere Produkte</h1>
      {{with . | transform.Unmarshal (dict "delimiter" ",")}}
        <table>
          {{range $i, $value := . }}
            {{if eq $i 0}}<thead>{{end}}
              <tr>
                {{range $value}}
                  <td>{{.}}</td>
                {{end}}
              </tr>
              {{if eq $i 0}}</thead>{{end}}
            {{end}}
        </table>
      {{end}}
        <a href="{{.Permalink}}" download>Download Liste</a>
    </section>
    {{end}}

    <section id="description">
      {{.Content}}
    </section>

    {{/* Rendering the menu on the home page.*/}}
    {{ with site.Menus.main }}  {{/* The outer with statement ensures 
    that Hugo does not render the section if the main menu is not present.*/}}        
      <section id="menu">
      <h1>Website sections</h1>
        <h2>this website has these major areas</h2>
        <ul>
          {{ range . }}
          <li>
              {{/* uses the url of the menu entries to navigate*/}}
            <a href="{{.URL}}">
              {{/* the css file provides icons based on the identifier*/}}
              <i class="icon-{{.Identifier}}"></i> 
              {{.Name }}  {{/* | humanize */}}
            </a>
              {{/*  Adding a post section to the main menu
                    via menu.yaml */}}
            {{ with .Post }}<p>{{.}}</p>{{end}}
          </li>
          {{ else }}
          {{/* Log for the website editor/developer */}}
          <!-- No menu entries present -->
          {{ end }}
        </ul>
      </section>
    {{ end }}

    {{/* main section "Aus unserem Blog"*/}}
    {{with 
      (where site.RegularPages 
      ".Section" "in" site.Params.mainSections)
    }}
    <section id="blog">
      <h1>Aus unserem Blog</h1>
      <ul class="posts">
        {{range first 3 .}}
        <li class="post">
          <a href="{{.Permalink}}">
            <h2>
              {{.Title}}
            </h2>
            <article>
              {{.Summary}}
            </article>
            <div>Weiter lesen</div>
          </a>
        </li>
        {{end}}  
      </ul>
    </section>
    {{end}} 

    {{/* main section "Erfahrungsberichte"*/}}
    {{ with .Param "testimonials" }}
      <section id="testimonials">
      <h1>Kunden Erfahrungsberichte</h1>
      <div>
        <ol>
          {{ range .}}
            <li>
              <p>{{.content}}</p>
              <div>
                <h2>{{.author}}</h2>
                <h3>{{.from}}</h3>
              </div>
            </li>
          {{ end }}
        </ol>
      </div>
    </section>
    {{ end }}

    <footer class="dark">
      {{with site.Menus.footer }}
      <nav>
        <ul>
        {{range .}}
        <li>
          <a href="{{.URL}}">{{.Name }}</a>     {{/* | humanize */}}
        </li>
        {{end}}
        </ul>
      </nav>
      {{end}}
      <ul>
        {{with site.Author.facebook}}
          <li>
            <a href="{{.}}" aria-label="Facebook">
              <i class="  icon-facebook"></i>
            </a>
          </li>
        {{end}}
        {{with site.Author.twitter}}
          <li>
            <a href="{{.}}" aria-label="Twitter">
              <i class="icon-twitter"></i>
            </a>
          </li>
        {{end}}
        {{with site.Author.email}}
          <li>
            <a href="mailto:{{.}}" aria-label="email">
              <i class="icon-email"></i>
            </a>
          </li>
        {{end}}
      </ul>
      <div>{{.Param "copyright" | markdownify}}</div>
  </footer>  

  </body>
</html> 
